<div *ngIf="isIE11" class="container">
  <div class="alert alert-warning mt-3">
    <h4 class="alert-heading">IE11 not supported</h4>
    <p>
      This app uses Angular {{ getVersion(angularVersion, 'M') }} and therefore does not support
      IE11. Please update your browser.
    </p>
  </div>
</div>

<div class="heading container py-5">
  <h1 class="bold font-curve-large" id="home">Swiss Post</h1>
  <h2 class="font-curve-large">Design System</h2>
  <img
    class="heading-visual"
    src="assets/images/rocket.png"
    alt="A rocket flying to the moon, symbolising the awesomeness of the Swiss Post Design System"
  />
  <div class="monospace">
    <span placement="bottom" [ngbTooltip]="versions">v{{ version }}</span>
  </div>
</div>

<ng-template #versions>
  <div class="versions">
    <p>@swisspost/design-system-styles: {{ getVersion(stylesVersion) }}</p>
    <p>@angular/cli: {{ getVersion(angularVersion) }}</p>
    <p>bootstrap: {{ getVersion(bootstrapVersion) }}</p>
    <p>@ng-bootstrap/ng-bootstrap: {{ getVersion(ngBootstrapVersion) }}</p>
    <p>ngx-toastr: {{ getVersion(ngxToasterVersion) }}</p>
  </div>
</ng-template>

<div class="bg-light py-5">
  <div class="container">
    <h3 class="bold mb-4">Migration from v4 to v5</h3>

    <p class="lead">What kind of application are you migrating?</p>

    <div class="form-check form-switch">
      <input
        id="is-migrating-intranet"
        type="checkbox"
        class="form-check-input"
        [(ngModel)]="isMigratingIntranet"
        (ngModelChange)="setLocaleStorage(migrationTypeIntranetKey, isMigratingIntranet)"
        role="switch"
      />
      <label for="is-migrating-intranet" class="form-check-label">Intranet application</label>
    </div>
    <div class="form-check form-switch">
      <input
        id="is-migrating-angular"
        type="checkbox"
        class="form-check-input"
        [(ngModel)]="isMigratingAngular"
        (ngModelChange)="setLocaleStorage(migrationTypeAngularKey, isMigratingAngular)"
        role="switch"
      />
      <label for="is-migrating-angular" class="form-check-label">Angular application</label>
    </div>

    <ol class="bubble-tea">
      <li>
        <h4 class="h5 bold">Clean start üßπ</h4>
        <p>Create a branch and commit all changes to have a clean, reversible starting point.</p>
      </li>
      <li>
        <h4 class="h5 bold">Uninstall the old packages üóëÔ∏è</h4>
        <!-- prettier-ignore -->
        <p>Uninstall the old styles <span *ngIf="isMigratingIntranet">and the old intranet header</span> package<span *ngIf="isMigratingIntranet">s</span>.</p>
      </li>
      <li>
        <!-- prettier-ignore -->
        <h4 class="h5 bold">
          Install the new package<span *ngIf="isMigratingIntranet">s</span> üì¶
        </h4>
        <code
          class="d-block p-3"
          [languages]="['bash']"
          [highlight]="
            'npm install @swisspost/design-system-styles' +
            (isMigratingIntranet ? ' @swisspost/design-system-intranet-header' : '')
          "
        ></code>
      </li>
      <li *ngIf="isMigratingAngular">
        <h4 class="h5 bold">Automatic migration tool ‚öôÔ∏è</h4>
        <p>
          If you are migrating an Angular application, you can profit from our Migration Schematics.
          You can run the following code, to automatically patch the changes that can be
          auto-migrated:
        </p>
        <code
          class="d-block p-3"
          [languages]="['bash']"
          [highlight]="'npx run @swisspost/design-system-migrations'"
        ></code>
      </li>
      <li>
        <h4 class="h5 bold">Component migration ü§ì</h4>

        <h5 class="h6 bold">Deprecations</h5>
        <ul class="mt-2 mb-3">
          <li>
            <strong>Dropped jQuery dependancy</strong>
            <br />
            <p class="info">
              Replace all jQuery components with the given one or integrate jQuery by your self (not
              recommended).
            </p>
          </li>
          <li>
            The
            <span class="highlight">Custom-Select</span>
            component has been marked as
            <span class="highlight">deprecated</span>
            and will be dropped in the next major version.
            <p class="info">We will try to make sure that there will be an alternative.</p>
          </li>
        </ul>

        <h5 class="h6 bold">Migrations list</h5>
        <p>
          Some changes cannot be automatically migrated.
          <br />
          Check the list of changes to see if you are affected and apply the transformation
          manually.
        </p>
        <p class="info" *ngIf="isMigratingAngular">
          Changes flaged with ‚öôÔ∏è can be automatically migrated with our migration tool.
        </p>

        <!-- Post migration table -->
        <ngb-accordion
          [activeIds]="migrationAccordionActiveIds"
          [destroyOnHide]="false"
          (panelChange)="migrationAccordionChange($event)"
        >
          <ngb-panel id="general">
            <ng-template ngbPanelHeader let-opened="opened">
              <div class="custom-header justify-content-between" [class.collapsed]="!opened">
                <button ngbPanelToggle class="accordion-button">
                  General
                  <small>
                    {{ getMigrationAccordionGroupedCheckboxesChecked('general') }}
                  </small>
                </button>
              </div>
            </ng-template>
            <ng-template ngbPanelContent>
              <!-- General Variables -->
              <div>
                <h5 class="mt-4 h6 bold">Variables</h5>
                <ul class="list-unstyled my-3">
                  <li>
                    <div class="form-check">
                      <input
                        id="generalvariables_isolatecomponents"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="
                          migrationAccordionGroupedCheckboxes.general.variables_isolatecomponents
                        "
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalvariables_isolatecomponents">
                          <span class="change-badge bg-danger">breaking</span> Removed <code>$isolate-components</code> variable.
                      </label>
                    </div>
                  </li>
                  <li>
                    <div class="form-check">
                      <input
                        id="generalvariables_fontsizemap"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="
                          migrationAccordionGroupedCheckboxes.general.variables_fontsizemap
                        "
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalvariables_fontsizemap">
                        <span class="change-badge bg-danger">breaking</span> Removed <code>$font-size-map</code> variable.
                      </label>
                    </div>
                  </li>
                  <li>
                    <div class="form-check">
                      <input
                        id="generalvariables_lineheightrg"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="
                          migrationAccordionGroupedCheckboxes.general.variables_lineheightrg
                        "
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalvariables_lineheightrg">
                        <span class="change-badge bg-danger">breaking</span> Removed <code>$line-height-rg</code> variable.<br>
                        <span class="highlight">Line-heights</span> are now relative to the font-size.
                      </label>
                    </div>
                  </li>
                  <li>
                    <div class="form-check">
                      <input
                        id="generalvariables_floatinglabel"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="
                          migrationAccordionGroupedCheckboxes.general.variables_floatinglabel
                        "
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalvariables_floatinglabel">
                        <span class="change-badge bg-danger">breaking</span> Removed <span class="highlight">floating-label</span> variables.<br>
                        <ul class="mt-2">
                          <li><code>$form-floating-label-padding-t</code></li>
                          <li><code>$form-floating-label-padding-b</code></li>
                          <li><code>$form-floating-textarea-line-height</code></li>
                          <li><code>$form-floating-textarea-padding-t</code></li>
                          <li><code>$form-floating-textarea-padding-b</code></li>
                        </ul>
                      </label>
                    </div>
                  </li>
                  <li>
                    <div class="form-check">
                      <input
                        id="generalvariables_socialmediacolors"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="
                          migrationAccordionGroupedCheckboxes.general.variables_socialmediacolors
                        "
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalvariables_socialmediacolors">
                        <span class="change-badge bg-danger">breaking</span> Removed <span class="highlight">socialmedia-color</span> variables.<br>
                        <ul class="mt-2">
                          <li><code>$facebook</code></li>
                          <li><code>$instagram</code></li>
                          <li><code>$youtube</code></li>
                          <li><code>$snapchat</code></li>
                          <li><code>$twitter</code></li>
                          <li><code>$xing</code></li>
                          <li><code>$linkedin</code></li>
                          <li><code>$kununu</code></li>
                          <li><code>$email</code></li>
                          <li><code>$brand-colors</code></li>
                        </ul>
                      </label>
                    </div>
                  </li>
                  <li>
                    <div class="form-check">
                      <input
                        id="generalvariables_options"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="migrationAccordionGroupedCheckboxes.general.variables_options"
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalvariables_options">
                        <span class="change-badge bg-danger">breaking</span> Moved bootstrap option variables from file <span class="highlight">src/themes/bootstrap/options.scss</span> to <span class="highlight">src/variables/features.scss</span>.<br>
                        <ul class="mt-2">
                          <li><code>$enable-caret</code></li>
                          <li><code>$enable-rounded</code></li>
                          <li><code>$enable-shadows</code></li>
                          <li><code>$enable-gradients</code></li>
                          <li><code>$enable-transitions</code></li>
                          <li><code>$enable-hover-media-query</code></li>
                          <li><code>$enable-grid-classes</code></li>
                          <li><code>$variable-prefix</code></li>
                        </ul>
                      </label>
                    </div>
                  </li>
                  <li>
                    <div class="form-check">
                      <input
                        id="generalvariables_colors"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="migrationAccordionGroupedCheckboxes.general.variables_colors"
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalvariables_colors">
                        <span class="change-badge bg-danger">breaking</span> Renamed <span class="highlight">color</span> variables.
                        <ul class="mt-2">
                          <li><code>$gray-cararra</code> became <code>$gray-background</code></li>
                          <li><code>$gray-pampas</code> became <code>$gray-background-light</code></li>
                          <li><code>$colors</code> became <code>$background-colors</code></li>
                          <li><code>$icon-colors</code> became <code>$contextual-colors</code></li>
                        </ul>
                      </label>
                    </div>
                  </li>
                  <li>
                    <div class="form-check">
                      <input
                        id="generalvariables_lineheigts"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="
                          migrationAccordionGroupedCheckboxes.general.variables_lineheigts
                        "
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalvariables_lineheigts">
                        Dropped usage of <span class="highlight">line-height</span> variables.<br>
                        <ul class="mt-2">
                          <li><code>$line-height-sm</code></li>
                          <li><code>$line-height-lg</code></li>
                        </ul>
                        <p class="info">The variables remain available due to bootstrap.</p>
                      </label>
                    </div>
                  </li>
                  <li>
                    <div class="form-check">
                      <input
                        id="generalvariables_lineheightlighter"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="
                          migrationAccordionGroupedCheckboxes.general.variables_lineheightlighter
                        "
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalvariables_lineheightlighter">
                        Dropped usage of <code>$font-weight-lighter</code> variable.<br>
                        Also removed corresponding <code>@font-face</code> rule.<br>
                        <p class="info">The variable remains available due to bootstrap.</p>
                      </label>
                    </div>
                  </li>
                  <li>
                    <div class="form-check">
                      <input
                        id="generalvariables_headingfontsizes"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="
                          migrationAccordionGroupedCheckboxes.general.variables_headingfontsizes
                        "
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalvariables_headingfontsizes">
                        Dropped useage of <span class="highlight">font-size</span> variables.<br>
                        Headings now have responsive font-sizes.<br>
                        <ul class="mt-2">
                          <li><code>$h1-font-size</code></li>
                          <li><code>$h2-font-size</code></li>
                          <li><code>$h3-font-size</code></li>
                          <li><code>$h4-font-size</code></li>
                          <li><code>$h5-font-size</code></li>
                          <li><code>$h6-font-size</code></li>
                        </ul>
                        <p class="info">The variables remain available due to bootstrap.</p>
                      </label>
                    </div>
                  </li>
                </ul>
              </div>

              <!-- General Mixins -->
              <div>
                <h5 class="mt-4 h6 bold">Mixins</h5>
                <ul class="list-unstyled my-3">
                  <li>
                    <div class="form-check">
                      <input
                        id="generalmixins_fontsizelineheight"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="
                          migrationAccordionGroupedCheckboxes.general.mixins_fontsizelineheight
                        "
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalmixins_fontsizelineheight">
                        <span class="change-badge bg-danger">breaking</span> Removed <span class="highlight">font-size</span> and <span class="highlight">line-height</span> mixins:<br>
                        <ul class="mt-2">
                          <li><code>font-size-calc</code></li>
                          <li><code>font-size-and-lineheight</code></li>
                          <li><code>font-line-height</code></li>
                        </ul>
                      </label>
                    </div>
                  </li>
                </ul>
              </div>

              <!-- General Classes -->
              <div>
                <h5 class="mt-4 h6 bold">Classes</h5>
                <ul class="list-unstyled my-3">
                  <li>
                    <div class="form-check">
                      <input
                        id="generalclasses_bgopacity"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="migrationAccordionGroupedCheckboxes.general.classes_bgopacity"
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalclasses_bgopacity">
                        <span class="change-badge bg-danger">breaking</span> Removed <code>.bg-[colorname]-opacity-[opacityvalue]</code> classes.<br>
                        Use <code>.bg-[colorname]</code> together with <code>var(--bg-opacity)</code> instead.<br>
                        <p class="info">Replace [colorname] for example with "primary", "warning", etc.</p>
                        <p class="info">Replace [opacityvalue] for example with "0", "0.5" or "1".</p>
                      </label>
                    </div>
                  </li>
                  <li>
                    <div class="form-check">
                      <input
                        id="generalclasses_secondary"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="migrationAccordionGroupedCheckboxes.general.classes_secondary"
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalclasses_secondary">
                        <span class="change-badge bg-danger">breaking</span> Removed <span class="highlight">secondary</span> classes.<br>
                        <ul class="mt-2">
                          <li><code>.bg-secondary</code></li>
                          <li><code>.border-secondary</code></li>
                          <li><code>.text-secondary</code></li>
                        </ul>
                      </label>
                    </div>
                  </li>
                  <li>
                    <div class="form-check">
                      <input
                        id="generalclasses_textauto"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="migrationAccordionGroupedCheckboxes.general.classes_textauto"
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalclasses_textauto">
                        <span *ngIf="isMigratingAngular">‚öôÔ∏è</span> Dropped usage of <code>.text-auto</code> class.<br>
                        Colors are now automatically handled by <code>var(--post-contrast-color)</code>.
                      </label>
                    </div>
                  </li>
                </ul>
              </div>

              <!-- General Properties -->
              <div>
                <h5 class="h6 bold">Properties</h5>
                <ul class="list-unstyled my-3">
                  <li>
                    <div class="form-check">
                      <input
                        id="generalproperites_rtlmode"
                        class="form-check-input"
                        type="checkbox"
                        [(ngModel)]="migrationAccordionGroupedCheckboxes.general.properites_rtlmode"
                        (change)="migrationAccordionGroupedCheckboxesChange()"
                      />
                      <!-- prettier-ignore -->
                      <label class="form-check-label" for="generalproperites_rtlmode">
                        <span class="change-badge bg-danger">breaking</span><span *ngIf="isMigratingAngular">‚öôÔ∏è</span> For better support of <span class="highlight">rtl-mode</span>,<br>
                        <code>left</code> and <code>right</code> have switched to <code>start</code> and <code>end</code>.
                      </label>
                    </div>
                  </li>
                </ul>
              </div>
            </ng-template>
          </ngb-panel>

          <ngb-panel id="bootstrap">
            <ng-template ngbPanelHeader let-opened="opened">
              <div class="custom-header justify-content-between" [class.collapsed]="!opened">
                <button ngbPanelToggle class="accordion-button">
                  Bootstrap
                  <small>
                    {{ getMigrationAccordionGroupedCheckboxesChecked('bootstrap') }}
                  </small>
                </button>
              </div>
            </ng-template>
            <ng-template ngbPanelContent></ng-template>
          </ngb-panel>

          <ngb-panel id="ngbootstrap" *ngIf="isMigratingAngular">
            <ng-template ngbPanelHeader let-opened="opened">
              <div class="custom-header justify-content-between" [class.collapsed]="!opened">
                <button ngbPanelToggle class="accordion-button">
                  NgBootstrap
                  <small>
                    {{ getMigrationAccordionGroupedCheckboxesChecked('ngbootstrap') }}
                  </small>
                </button>
              </div>
            </ng-template>
            <ng-template ngbPanelContent></ng-template>
          </ngb-panel>

          <ngb-panel id="post">
            <ng-template ngbPanelHeader let-opened="opened">
              <div class="custom-header justify-content-between" [class.collapsed]="!opened">
                <button ngbPanelToggle class="accordion-button">
                  Post
                  <small>
                    {{ getMigrationAccordionGroupedCheckboxesChecked('post') }}
                  </small>
                </button>
              </div>
            </ng-template>
            <ng-template ngbPanelContent></ng-template>
          </ngb-panel>
        </ngb-accordion>
      </li>
      <li>
        <h4 class="h5 bold">Bootstrap migration ü•æ</h4>
        <p>
          Check the
          <a href="https://getbootstrap.com/docs/5.0/migration/" target="_blank">
            bootstrap migration guide
          </a>
          to see if you need to update any bootstrap related code.
        </p>
      </li>
      <li>
        <h4 class="h5 bold">Treat yourself to a üç∫, you've done a great job! üöÄ</h4>
      </li>
    </ol>
  </div>
</div>

<div class="topic-teaser bg-nightblue mt-huge-r mb-giant-r">
  <div class="container">
    <div class="topic-teaser-container bg-nightblue">
      <div class="row pt-huge-r">
        <div class="topic-teaser-content col-12 col-lg-8">
          <h2 class="topic-teaser-title font-curve-large mb-large">
            <span class="bold">Resources</span>
            <span class="light">For a consistent user experience</span>
          </h2>
          <ul class="link-list font-curve-regular mb-large">
            <li class="link-list-item">
              <a
                target="_blank"
                rel="noopener"
                [href]="'//getbootstrap.com/docs/' + getVersion(bootstrapVersion, 'Mm')"
              >
                <span>Bootstrap Documentation</span>
              </a>
            </li>
            <li class="link-list-item">
              <a
                target="_blank"
                rel="noopener"
                [href]="'//v' + getVersion(angularVersion, 'M') + '.angular.io/docs'"
              >
                <span>Angular Docs</span>
              </a>
            </li>
            <li class="link-list-item">
              <!-- exact link is not possible, because the latest url is different from the previews -->
              <a target="_blank" rel="noopener" href="https://ng-bootstrap.github.io/#/home">
                <span>ngBootstrap Docs</span>
              </a>
            </li>
            <li class="link-list-item">
              <!-- exact link is not possible, because no version urls available -->
              <a target="_blank" rel="noopener" href="https://fonts.post.ch/frutigerneueforpost/#/">
                <span>Frutiger Neue For Post</span>
              </a>
            </li>
          </ul>
        </div>
        <div class="topic-teaser-image-container col-10 col-rg-8 col-lg-4">
          <img class="topic-teaser-image" src="assets/images/lego.jpg" alt="Giraffe" />
        </div>
      </div>
    </div>
  </div>
</div>
