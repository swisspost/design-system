import { Meta, Source } from '@storybook/addon-docs';
import LinkTo from '@storybook/addon-links/react';
import { BADGE } from '@geometricpanda/storybook-addon-badges';

<Meta
  title="Icons/Getting started"
  parameters={{
    previewTabs: {
      canvas: {
        hidden: true,
      },
    },
    viewMode: 'docs',
    badges: [BADGE.NEEDS_REVISION],
  }}
/>

# @swisspost/design-system-icons

[![npm version](https://badge.fury.io/js/@swisspost%2Fdesign-system-icons.svg)](https://badge.fury.io/js/@swisspost%2Fdesign-system-icons)

## Installation

```bash dark
npm install @swisspost/design-system-icons
```

<p class="alert alert-info alert-md">
  If you like to use our <LinkTo kind="icons-components-icon--default">icon</LinkTo> component to
  render the icons (which we recommend), you must install as well the <strong>components</strong>{' '}
  package.
  <br />
  To learn how to set up this package please read our{' '}
  <LinkTo kind="getting-started-components--page">Components - Getting Started</LinkTo> page.
</p>

## Usage

First you need to make the icons available in your web application.
This basically means that you need to copy & paste them manually or automatically from the `node_modules` folder to a served folder in your project.
The way to do this strongly depends on your project setup.
Read on to find out how possible solutions could look like...

### Serve the icons within an Angular application

It is very easy to serve the icons from the `node_modules` folder directly into your angular application.
Just open your `anuglar.json` file and add the following path to the `build.options.assets` field:

```json dark
{
  "projects": {
    "name-of-your-angular-app": {
      "architect": {
        "build": {
          "options": {
            "assets": [
              {
                    "glob": "**/*.svg",
                    "input": "./node_modules/@swisspost/design-system-icons/public/post-icons",
                    "output": "./public/post-icons/"
                }
            ]
          }
        }
      }
    }
  }
}
```

### Copy & paste the icons with a postinstall script

Add a `postinstall` script to your `package.json`, to copy & paste the icons to a public folder within your web project.<br/>
If you want to know more about pre & post scripts and how they are handled, please read the <a href="https://docs.npmjs.com/cli/v7/using-npm/scripts#description" target="_blank">npm documentation</a>.

#### NodeJS version 16.7.0 or newer

```json dark
// package.json
{
  "scripts": {
    "postinstall": "node -e \"const fs = require('fs'); fs.cpSync('node_modules/@swisspost/design-system-icons/public/post-icons', 'public/post-icons', { recursive: true }, (err) => { if (err) throw err; });\""
  }
}
```

#### Older NodeJS versions

```json dark
// package.json
{
  "scripts": {
    "postinstall": "node postinstall-icons.js"
  }
}
```

```js dark
// postinstall-icons.js
const fse = require('fs-extra');

const srcDir = 'node_modules/@swisspost/design-system-icons/public/post-icons';
const destDir = 'public/post-icons';

// To copy a folder or file, select overwrite accordingly
try {
  fse.copySync(srcDir, destDir, { overwrite: true });
  console.log('Icons successfully copied!');
} catch (err) {
  console.error(err);
}
```

### Configure the icons base-path

Now that you have the icons available in your project, you need to tell the `icon` component where to find them.<br/>
You can do this with two different solutions:

1. Use the **meta-tag** solution to configure the `base-path` globally for all icons on the page.
2. Use the **base-attribute** solution, to configure the `base-path` on every `icon` component. This can also used to overwrite the global `base-path` for a single icon.

#### Meta-tag solution

```html dark
<html>
  <head>
    <meta name="design-system-settings" data-post-icon-base="/public/post-icons/" />
  </head>
</html>
```

#### Base-attribute solution

```html dark
<post-icon name="1000" base="/base-path/to/your/own/icon-folder"></post-icon>
```

## Usage of the CDN approch

There is one last thing we want to tell you about.

You can also only install and set up the **components** package and use the `icon` component without any of the before descriped steps.
In this case, the component will serve the icons from a cdn.

<p class="alert alert-warning alert-md">
  At least for now, we don't recommend this solution because of performance and cross-origin issues.
  <br />
  Use this approch at your own risk!
</p>
