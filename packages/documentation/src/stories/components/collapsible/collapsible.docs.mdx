import { Canvas, Controls, Meta } from '@storybook/blocks';
import * as CollapsibleStories from './collapsible.stories';

<Meta of={CollapsibleStories} />

# Collapsible

<p className="lead">Toggle the visibility of content across your project.</p>

The `<post-collapsible>` component is used to show and hide content.
Collapsing an element will animate the height from its current value to 0.

<Canvas of={CollapsibleStories.Default} />
<Controls of={CollapsibleStories.Default} />

## Examples

The following examples show different use cases for the `<post-collapsible>` component.

### Initially Collapsed

To make the collapsible content hidden by default, just use the `collapsible="true"` property.

<Canvas of={CollapsibleStories.InitiallyCollapsed} />

### Heading Level

Use the `heading-level` property to define the hierarchical level of the collapsible header within the structure of a document.

<Canvas of={CollapsibleStories.HeadingLevel} />

### Intricate Content

The collapsible component uses [HTML slot elements](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot)
to allow any HTML content to be used as part of its header and body.<br/>
By default, all children are appended to the component's body.
For a specific child to be displayed in the header, a `slot="header"` attribute must be added.

<Canvas of={CollapsibleStories.IntricateContent} />

### Custom Trigger

The `<post-collapsible>` component exposes a `.toggle()` method that allows to trigger the collapse programmatically.
This method is asynchronous and returns a promise that resolves with the current open state.
It optionally takes a boolean parameter that forces open when `true` or close when `false`.

```typescript
const collapsible = document.querySelector('#collapsibleId') as HTMLPostCollapsibleElement;
collapsible.toggle(/* open: boolean */).then((/* isOpen: boolean */) => {});
```

A header is then not mandatory and can be replaced by an external control.

In this case, to ensure good accessibility, identify the collapsible with an `id`,
then add an `aria-controls` attribute to your control element referencing this `id`.
Also make sure to add an `aria-expanded` attribute to the control element:
if the collapsible element is closed, the attribute on the control element must have a value of `aria-expanded="false"`
and `aria-expanded="true"` otherwise.

<Canvas of={CollapsibleStories.CustomTrigger} />
