import { Canvas, Controls, Meta, Source } from '@storybook/blocks';
import { PostAlert, PostTabHeader, PostTabPanel, PostTabs, } from '@swisspost/design-system-components-react';
import StylesPackageImport from '@/shared/styles-package-import.mdx';
import * as AlertStories from './standard-html/alert.stories';
import * as PostAlertStories from './web-component/post-alert.stories';
import AlertDismissSample from './web-component/alert-dismiss.sample?raw';

<Meta of={AlertStories} />

<div className="docs-title">
  # Alert

  <nav>
    <link-design of={JSON.stringify(AlertStories)}></link-design>
  </nav>
</div>

<div className="lead">
  Use alerts to communicate brief, important, and potentially time-sensitive messages to the user.
</div>

Alerts are intended to attract the user's attention without interrupting their ongoing task.

<PostAlert type="info">
  <p slot="heading">There are various methods to integrate this component into your project.</p>
  <p>
    We advise opting for the "Standard HTML" approach for alerts that remain static on the page and
    using the "Web Component" method for dismissible alerts.
  </p>
</PostAlert>

<PostTabs>
    <PostTabHeader panel="standardHTML">Standard HTML</PostTabHeader>
    <PostTabPanel name="standardHTML">
      <Canvas sourceState="shown" of={AlertStories.Default} />

      <div className="hide-col-default">
        <Controls of={AlertStories.Default} />
      </div>

      <StylesPackageImport components={["alert"]} />

      ## Examples

      ### Contents

      Alerts can contain various HTML elements like headings, paragraphs, lists and dividers.

      <Canvas of={AlertStories.AdditionalContent} />

      ### Custom Icon

      Alerts come with a preassigned icon based on their type.
      You have the option to customize this icon by using a `post-icon` element inside the alert.
      For more information, read the [getting started with icons guide](/?path=/docs/40ed323b-9c1a-42ab-91ed-15f97f214608--docs).

      <Canvas of={AlertStories.CustomIcon} />

      If you prefer not to display any icon, you can add the `.no-icon` class to the alert.

      <Canvas of={AlertStories.NoIcon} />

      ### Action Buttons

      To include action buttons within an alert, apply the `.alert-action` class to the alert element,
      enclose the alert's content within a `.alert-content` container, and place the action buttons within a `.alert-buttons` wrapper.

      <Canvas of={AlertStories.ActionButtons} />

      ### Banner

      To present an alert as a banner anchored at the bottom of the page, simply add the class `.alert-fixed-bottom`.
      **These alerts are typically designed to be dismissible, therefore it is advisable to employ a web component for their implementation.**


      <Canvas of={AlertStories.Fixed} />
    </PostTabPanel>

    <PostTabHeader panel="webComponent">Web Component</PostTabHeader>
    <PostTabPanel name="webComponent">
      <Canvas sourceState="shown" of={PostAlertStories.Default} />

      <Controls of={PostAlertStories.Default} />

      ## Installation

      The `<post-alert>` element is part of the `@swisspost/design-system-components` package.
      For more information, read the [getting started with components guide](/?path=/docs/edfb619b-fda1-4570-bf25-20830303d483--docs).

      ## Examples

      ### Contents

      Alerts can contain various HTML elements like paragraphs, lists, icons and dividers.

      By default all children of the `<post-alert>` are placed in the body.
      Use the `heading` slot to place a child in the heading, and the `actions` slot for action buttons.
      Learn more about <a rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_templates_and_slots#adding_flexibility_with_slots">slots in the mdn web docs</a>.

      <Canvas of={PostAlertStories.Contents} />

      ### Custom Icon

      Alerts come with a preassigned icon based on their type.
      You have the option to customize this icon by assigning the desired icon's name to the `icon` property of the alert.
      Find the icon you need with the [icon search page](/?path=/docs/5704bdc4-c5b5-45e6-b123-c54d01fce2f1--docs).

      <Canvas of={PostAlertStories.CustomIcon} />

      If you prefer not to display any icon, you can set the `icon` property to `none`.

      <Canvas of={PostAlertStories.NoIcon} />

      ### Dismissal

      The `dismissible` property can be set to enable users to dismiss the alert.
      When present, it specifies that the alert should contain a dismiss button,
      and you must provide a label for this button using the `dismiss-label` property.
      Although the label remains hidden from view, it is essential for ensuring accessibility for users of assistive technologies.

      <Canvas of={PostAlertStories.Dismissible} />

      Alternatively, you can use any button, including action buttons within the alert, as a trigger for dismissing the alert using the `.dismiss()` method.
      This method operates asynchronously and returns a promise that resolves once the fade-out animation has finished.

      <Source code={AlertDismissSample} language="typescript"/>

      ### Banner

      To present an alert as a banner anchored at the bottom of the page, simply add the `fixed` property.
      Such alerts are typically intended to be dismissible.

      <Canvas of={PostAlertStories.Fixed} />
    </PostTabPanel>

</PostTabs>
