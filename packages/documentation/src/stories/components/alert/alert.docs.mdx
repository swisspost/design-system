import { Canvas, Story, Controls, Meta, Source } from '@storybook/blocks';
import LinkTo from '@storybook/addon-links/react';
import {
  PostAlert,
  PostTabs,
  PostTabHeader,
  PostTabPanel,
} from '@swisspost/design-system-components-react';
import StylesPackageImport from '../../../shared/styles-package-import.mdx';
import * as AlertStories from './standard-html/alert.stories';
import * as PostAlertStories from './web-component/post-alert.stories';
import AlertDismissSample from './web-component/alert-dismiss.sample?raw';
import { Figma, Design } from '@storybook/addon-designs/blocks';

';

<Meta of={AlertStories} />

# Alert

<div className="lead">
  Use alerts to communicate brief, important, and potentially time-sensitive messages to the user.
</div>

Alerts are intended to attract the user's attention without interrupting their ongoing task.

<PostAlert type="info">
  <p slot="heading">There are various methods to integrate this component into your project.</p>
  <p>
    We advise opting for the "Standard HTML" approach for alerts that remain static on the page and
    using the "Web Component" method for dismissible alerts.
  </p>
</PostAlert>

<PostTabs>
    <PostTabHeader slot="tabs" panel="standardHTML">Standard HTML</PostTabHeader>
    <PostTabPanel name="standardHTML">
      <Canvas of={AlertStories.Default} />

      <div className="hide-col-default">
        <Controls of={AlertStories.Default} />
      </div>

      <StylesPackageImport components={["alert"]} />

      ## Examples

      ### Contents

      Alerts can contain various HTML elements like headings, paragraphs, lists and dividers.

      <Canvas of={AlertStories.AdditionalContent} />

      ### Custom Icon

      Alerts come with a preassigned icon based on their type.
      You have the option to customize this icon by using a `post-icon` element inside the alert.
      For more information, read the <LinkTo kind="icons-getting-started" story="docs">getting started with icons guide</LinkTo>.

      <Canvas of={AlertStories.CustomIcon} />

      If you prefer not to display any icon, you can add the `.no-icon` class to the alert.

      <Canvas of={AlertStories.NoIcon} />

      ### Action Buttons

      To include action buttons within an alert, apply the `.alert-action` class to the alert element,
      enclose the alert's content within a `.alert-content` container, and place the action buttons within a `.alert-buttons` wrapper.

      <Canvas of={AlertStories.ActionButtons} />

      ### Banner

      To present an alert as a banner anchored at the bottom of the page, simply add the class `.alert-fixed-bottom`.
      **These alerts are typically designed to be dismissible, therefore it is advisable to employ a web component for their implementation.**


      <Canvas of={AlertStories.Fixed} />
    </PostTabPanel>

    <PostTabHeader slot="tabs" panel="webComponent">Web Component</PostTabHeader>
    <PostTabPanel name="webComponent">
      <Canvas of={PostAlertStories.Default} />

      <Controls of={PostAlertStories.Default} />

      ## Installation

      The `<post-alert/>` element is part of the `@swisspost/design-system-components` package.
      For more information, read the <LinkTo kind="getting-started-components" story="docs">getting started with components guide</LinkTo>.

      ## Examples

      ### Contents

      Alerts can contain various HTML elements like paragraphs, lists, icons and dividers.

      By default all children of the `<post-alert/>` are placed in the body.
      Use the `heading` slot to place a child in the heading, and the `actions` slot for action buttons.
      Learn more about <a rel="noopener" target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_templates_and_slots#adding_flexibility_with_slots">slots in the mdn web docs</a>.

      <Canvas of={PostAlertStories.Contents} />

      ### Custom Icon

      Alerts come with a preassigned icon based on their type.
      You have the option to customize this icon by assigning the desired icon's name to the `icon` property of the alert.
      Find the icon you need with the <LinkTo kind="icons-search-for-icons" story="docs">icon search page</LinkTo>.

      <Canvas of={PostAlertStories.CustomIcon} />

      If you prefer not to display any icon, you can set the `icon` property to `none`.

      <Canvas of={PostAlertStories.NoIcon} />

      ### Dismissal

      The `dismissible` property can be set to enable users to dismiss the alert.
      When present, it specifies that the alert should contain a dismiss button,
      and you must provide a label for this button using the `dismiss-label` property.
      Although the label remains hidden from view, it is essential for ensuring accessibility for users of assistive technologies.

      <Canvas of={PostAlertStories.Dismissible} />

      Alternatively, you can use any button, including action buttons within the alert, as a trigger for dismissing the alert using the `.dismiss()` method.
      This method operates asynchronously and returns a promise that resolves once the fade-out animation has finished.

      <Source code={AlertDismissSample} language="typescript"/>

      ### Banner

      To present an alert as a banner anchored at the bottom of the page, simply add the `fixed` property.
      Such alerts are typically intended to be dismissible.

      <Canvas of={PostAlertStories.Fixed} />
    </PostTabPanel>
    <PostTabHeader slot="tabs" panel="design">Desing</PostTabHeader>
    <PostTabPanel name="design">

    #### General

    ##### Import
    `import { Figma, Design } from '@storybook/addon-designs/blocks';`

    The Design Addon was already installed and there are 2 tags that can be used to inegrate Figma into storybook.
    Both Tags are using the same iframe underneath and as it is an iframe that is comming from figma there is not
    a lot we can do to customize what exactly and especially how exactly the contents are displayed.

    ##### Problems
    - The displayed content is always centered on the component that was linked but the very top is always cut off a bit. The effect
    is different when a part of a sheet is selected see examples bellow.
    - The only variable option is the height wich can be specified in percent of the width wich is always 100% of the available space.
    - The component will always be scaled to fit the height or the width of the iframe wichever is smaller. The only way this can be
     avoided is when a specific part of a sheet is linked. In that case that part of the sheet is centered and only the size of this part
     is considered when setting the scale. The whole sheet can still be seen by manually zooming out or moving arround.

    #### Figma tag
    This is a Figma tag that is using the link to the Notification Banner Component Sheet. (heigth 100%)
    <Figma url="https://www.figma.com/file/xZ0IW0MJO0vnFicmrHiKaY/Components-Post?type=design&node-id=16901-42965&mode=dev"
    height="100%" embede_Host="Test"></Figma>
    This time the Headline Master Component was linked. (heigth 100%)
    <Figma url="https://www.figma.com/file/xZ0IW0MJO0vnFicmrHiKaY/Components-Post?type=design&node-id=16901-42976&mode=dev"
    height="100%" embede_Host="Test"></Figma>

    #### Design Tag

    Figma tags need a set url inside the Tag. An alternative to the Figma tags are the Design tags. You can define the url as a paramater in the story. Each story can thus have its own figma url.
    As you could see in the previous example Figma sheets work relatively ok. But as you can see in the case of the Bade in Figma there is no single root that contains both the grid with the Labels and the badges themselves.

    This is a Design tag where the badge was linked as you can see the grid is missing (height 300%)
    <Design of={AlertStories.figma} height="300%"></Design>
    And here is the Grid that was missing (height default)
    <Design of={AlertStories.General}></Design>

    </PostTabPanel>

</PostTabs>
