import { Meta, Source } from '@storybook/blocks';
import { PostTabHeader, PostTabPanel, PostTabs } from '@swisspost/design-system-components-react';
import StylesPackageImport from '@/shared/styles-package-import.mdx';
import NgbComponentDemoLink from '@/shared/nb-bootstrap/ngb-component-demo-link.mdx';
import NgbComponentAlert from '@/shared/nb-bootstrap/ngb-component-alert.mdx';
import NgbComponentImport from '@/shared/nb-bootstrap/ngb-component-import.mdx';
import NgbComponentInternationalization from '@/shared/nb-bootstrap/ngb-component-internationalization.mdx';
import * as datepickerStories from './datepicker.stories';
import datepickerI18nProvider from './datepicker-i18n-provider.sample?raw';
import datepickerI18nProviderImport from './datepicker-i18n-provider-import.sample?raw';
import datepickerFormatter from './datepicker-formatter.sample?raw';
import datepickerFormatterImport from './datepicker-formatter-import.sample?raw';
import datepickerFloatingLabel from './datepicker-floating-label.sample.html?raw';
import datepickerNavigationArrows from './datepicker-navigation-arrows.sample.html?raw';
import datepickerValidation from './datepicker-validation.sample.html?raw';

<Meta of={datepickerStories} />

<div className="docs-title">
  # Datepicker

  <nav>
    <link-design of={JSON.stringify(datepickerStories)}></link-design>
    <NgbComponentDemoLink component="datepicker" />
  </nav>
</div>

<p className="lead">Display dates on a calendar view, allowing selection of a date or date range.</p>

<NgbComponentAlert component="datepicker" />

<ul>
  <li>
    <a href="#component-import" target="_self">Component Import</a>
  </li>
  <li>
    <a href="#style-imports" target="_self">Style Imports</a>
  </li>
  <li>
    <a href="#internationalization" target="_self">Internationalization</a>
  </li>
  <li>
    <a href="#date-format" target="_self">Date Format</a>
  </li>
  <li>
    <a href="#examples" target="_self">Examples</a>
  </li>
</ul>

<NgbComponentImport module="NgbDatepickerModule" />

<StylesPackageImport components={["datepicker"]} />

<NgbComponentInternationalization />

The datepicker requires additional translations for months and days of the week. These can be configured using the service below:

<div className='limit-source-height'>
  <Source code={datepickerI18nProvider} language="typescript"/>
</div>
<Source code={datepickerI18nProviderImport} language="typescript"/>

## Date Format

The datepicker uses the [NgbDateStruct](https://ng-bootstrap.github.io/#/components/datepicker/api#NgbDateStruct) interface as a model and not the native Date object.
To format dates in another type, you can define a formatter.
The formatter below transforms the NgbDateStruct into the usual Swiss format string `DD.MM.YYYY`.

<div className='limit-source-height'>
  <Source code={datepickerFormatter} language="typescript"/>
</div>
<Source code={datepickerFormatterImport} language="typescript"/>


## Examples

<PostTabs>
  <PostTabHeader panel="floating-label">Floating Label Input</PostTabHeader>
  <PostTabPanel name="floating-label">
    <Source code={datepickerFloatingLabel} language="html"/>
  </PostTabPanel>

  <PostTabHeader panel="navigation-arrows">Navigation Arrows Only</PostTabHeader>
  <PostTabPanel name="navigation-arrows">
    <Source code={datepickerNavigationArrows} language="html"/>
  </PostTabPanel>

  <PostTabHeader panel="validation">Invalid Feedback</PostTabHeader>
  <PostTabPanel name="validation">
    <Source code={datepickerValidation} language="html"/>
  </PostTabPanel>
</PostTabs>

