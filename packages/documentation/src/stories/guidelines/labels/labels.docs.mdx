import { Meta, Source, Canvas } from '@storybook/blocks';
import * as FormLabelsStories from './labels.stories';

import visibleLabels from './labels-visible.sample.html?raw';
import invisibleLabels from './labels-invisible.sample.html?raw';
import referenceLabels from './labels-reference.sample.html?raw';

<Meta of={FormLabelsStories} />

# Form Labels

Labels are crucial in ensuring accessibility in web forms, as they provide necessary information about form elements for all users, especially those using assistive technologies like screen readers.

## Visible Labels

Use the `&lt;label&gt;` element along with the `for` attribute to create a link between a `&lt;label&gt;` and an `&lt;input&gt;` field. The value of the `for` attribute must match the `id` of the corresponding `&lt;input&gt;` element, allowing screen readers to associate them correctly.

<Source code={visibleLabels} language="html" />

## Invisible Labels with `aria-label`

Make a hidden `&lt;label&gt;` element available for assistive technologies using the `aria-label` for labeling form elements. The `aria-label` attribute can be used to assign an accessible label to any form element that might not have a visible label.

<Source code={invisibleLabels} language="html" />

## Referencing Labels with `aria-labelledby`

The `aria-labelledby` attribute allows you to reference the `id` of another element that serves as the `&lt;label&gt;`. This is especially useful when the `&lt;label&gt;` is complex or spans multiple elements. Hidden elements can also be referenced using `aria-labelledby`, allowing screen readers to announce the associated label even though it is not displayed visually.

<Source code={referenceLabels} language="html" />

# Controls Grouping

When grouping `&lt;form controls&gt;`, the `&lt;fieldset&gt;`and `&lt;legend&gt;` elements play a critical role in providing context to screen readers. However, improper usage of these elements can lead to confusion for users with disabilities.

<div className="table-responsive">
  <table className="table caption-top">
    <caption>Common mistakes and how to avoid them.</caption>
    <colgroup>
      <col style={{ width: '50%' }} />
      <col style={{ width: '50%' }} />
    </colgroup>
    <tbody>
      <tr>
        <td colSpan="2" className="fw-bold">
          The `&lt;legend/&gt;` element is not a direct child of the `&lt;fieldset/&gt;`
        </td>
      </tr>
      <tr>
        <td>
          <ul className="list-unstyled">
            <li className="d-flex gap-mini">
              <div>❌</div>
              <div>A `&lt;div&gt;` or other element is incorrectly used as the first child of a `&lt;fieldset&gt;` with the `&lt;legend&gt;` nested inside this element.</div>
            </li>
          </ul>
        </td>
        <td>
          <ul className="list-unstyled">
            <li className="d-flex gap-mini">
              <div>✔️</div>
              <div>Always place the `&lt;legend&gt;` right after the `&lt;fieldset&gt;` to preserve the association.</div>
            </li>
          </ul>
        </td>
      </tr>
      <tr>
        <td colSpan="2" className="fw-bold">
          A `&lt;div&gt;` is used for grouping instead of `&lt;fieldset&gt;`
        </td>
      </tr>
      <tr>
        <td>
          <ul className="list-unstyled">
            <li className="d-flex gap-mini">
              <div>❌</div>
              <div>For visual reasons, a `&lt;div&gt;` is used for grouping controls instead of `&lt;fieldset&gt;`. No ARIA roles or attributes are set, failing to provide the necessary semantic meaning on assistive technologies.</div>
            </li>
          </ul>
        </td>
        <td>
          <ul className="list-unstyled">
            <li className="d-flex gap-mini">
              <div>✔️</div>
              <div>Assign the `role="group"` to the `&lt;div&gt;` element to provide it with the semantic meaning of a `&lt;fieldset&gt;`. Use `aria-labelledby` or `aria-describedby` to associate any descriptive text with the grouping container to ensure that screen readers can provide context to users.</div>
            </li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div>

## The wrong way

<Canvas of={FormLabelsStories.FieldsetDontExample} />

## Recommended ways

### Standard

<Canvas of={FormLabelsStories.FieldsetDoExample} />

### Alternative using div

<Canvas of={FormLabelsStories.DivForGroupingExample} />
