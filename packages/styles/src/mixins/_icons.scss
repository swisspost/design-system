@use 'sass:map';
@use 'sass:meta';
@use 'sass:list';

@use './../variables/type';
@use './../variables/color';
@use './../variables/components/button';
@use './../functions/icons' as icon-fn;
@use './../mixins/utilities';
@use './../utilities/env-variables' as icon-version;

// Default path for icons
$icons-default-path: '../icons/temp';

/**
 * Light mixin that applies only the mask image.
 *
 * Intended for internal use where full control over icon styles is needed.
 * Not documented for Design System users.
 */
@mixin mask-image($name, $path: $icons-default-path) {
  mask-image: var(--post-icon-#{$name});
  background-color: currentColor;

  // An extra selector is required to avoid having nested rule errors
  & {
    @at-root {
      @include meta.load-css('#{$path}/#{$name}');
    }
  }
}

/**
 * Full-featured icon mixin.
 *
 * Documented for Design System users.
 * Use with caution internally as it applies additional styles beyond the mask.
 */
@mixin icon($name, $path: $icons-default-path, $color: inherit, $size: 1em) {
  @include mask-image($name, $path);
  display: inline-block;
  width: $size;
  height: $size;
  vertical-align: -0.15em;
  color: $color;
  mask-position: center center;
  mask-repeat: no-repeat;
  mask-size: 100%;
}

@mixin remove-icon() {
  mask-image: none;
}
