@use 'sass:map';
@use '../tokens/elements';
@use '../functions/tokens';
@use './../mixins/icons';

tokens.$default-map: (
  post-validation-error: #b20000,
  post-validation-success: #107800,
  post-device-font-size-9: 14px,
  post-radio-button-icon-width-inner: 24px,
  post-radio-button-icon-height-inner: 24px,
  post-validation-list-gap-inline: 8px,
  post-input-spacing-padding-block-text-assist: 6px,
  post-input-spacing-padding-inline-text-assist: 2px
);

/*
 Initially hide the feedback message
 */

.valid-feedback,
.invalid-feedback {
  display: none;
}

/*
 Form must have the .was-validated class
*/

.was-validated {
  /*
 Generic form input classes
*/

  :valid ~ .valid-feedback,
  .is-valid ~ .valid-feedback {
    color: tokens.get('post-validation-success');
    display: flex;
    align-items: center;
    width: 100%;
    margin: 0;
    padding: tokens.get('post-input-spacing-padding-block-text-assist')
      tokens.get('post-input-spacing-padding-inline-text-assist');
    font-size: tokens.get('post-device-font-size-9');
  }

  :invalid ~ .invalid-feedback,
  .is-invalid ~ .invalid-feedback {
    color: tokens.get('post-validation-error');
    display: flex;
    align-items: center;
    width: 100%;
    margin: 0;
    padding: tokens.get('post-input-spacing-padding-block-text-assist')
      tokens.get('post-input-spacing-padding-inline-text-assist');
    font-size: tokens.get('post-device-font-size-9');
  }

  /*
 Checkbox and Select box specific classes
*/
  input[type='checkbox'],
  input[type='radio'] {
    &:invalid ~ .invalid-feedback:before,
    &.is-invalid ~ .invalid-feedback:before {
      height: tokens.get('post-radio-button-icon-height-inner');
      width: tokens.get('post-radio-button-icon-width-inner');
      display: inline-block;
      margin-inline-end: tokens.get('post-validation-list-gap-inline');
      mask-image: url('error-icon.svg');
      background-color: currentColor;
      content: '';
    }

    &:valid ~ .valid-feedback,
    &.is-valid ~ .valid-feedback {
      &:before {
        height: tokens.get('post-radio-button-icon-height-inner');
        width: tokens.get('post-radio-button-icon-width-inner');
        display: inline-block;
        margin-inline-end: tokens.get('post-validation-list-gap-inline');
        mask-image: url('success-icon.svg');
        background-color: currentColor;
        content: '';
      }
    }
  }
  /*
 Radio group specific classes
*/

  input[type='radio'] {
    &:invalid .invalid-feedback,
    &.is-invalid .invalid-feedback {
      &:before {
        height: tokens.get('post-radio-button-icon-height-inner');
        width: tokens.get('post-radio-button-icon-width-inner');
        display: inline-block;
        margin-inline-end: tokens.get('post-validation-list-gap-inline');
        mask-image: url('error-icon.svg');
        background-color: currentColor;
        content: '';
      }
    }

    &:valid ~ .valid-feedback,
    &.is-valid ~ .valid-feedback {
      &:before {
        height: tokens.get('post-radio-button-icon-height-inner');
        width: tokens.get('post-radio-button-icon-width-inner');
        display: inline-block;
        margin-inline-end: tokens.get('post-validation-list-gap-inline');
        mask-image: url('success-icon.svg');
        background-color: currentColor;
        content: '';
      }
    }
  }

  fieldset:has(input:checked) .valid-feedback {
    display: flex;
    color: tokens.get('post-validation-success');
    align-items: center;
    width: 100%;
    margin: 0;
    padding: tokens.get('post-input-spacing-padding-block-text-assist')
      tokens.get('post-input-spacing-padding-inline-text-assist');
    font-size: tokens.get('post-device-font-size-9');
    &:before {
      height: tokens.get('post-radio-button-icon-height-inner');
      width: tokens.get('post-radio-button-icon-width-inner');
      display: inline-block;
      margin-inline-end: tokens.get('post-validation-list-gap-inline');
      mask-image: url('success-icon.svg');
      background-color: currentColor;
      content: '';
    }
  }

  fieldset:not(:has(input:checked)) .invalid-feedback {
    display: flex;
    color: tokens.get('post-validation-error');
    align-items: center;
    width: 100%;
    margin: 0;
    padding: tokens.get('post-input-spacing-padding-block-text-assist')
      tokens.get('post-input-spacing-padding-inline-text-assist');
    font-size: tokens.get('post-device-font-size-9');
    &:before {
      height: tokens.get('post-radio-button-icon-height-inner');
      width: tokens.get('post-radio-button-icon-width-inner');
      display: inline-block;
      margin-inline-end: tokens.get('post-validation-list-gap-inline');
      mask-image: url('error-icon.svg');
      background-color: currentColor;
      content: '';
    }
  }
}
