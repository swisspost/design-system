@use 'sass:map';

@use './../../functions/calc';
@use './../../mixins/utilities' as utility-mx;
@use './../../mixins/typo' as typo-mx;
@use './../../tokens/components' as tokens;
@use './../../variables/animation';

$border-width: 2px;

@function post-input($name) {
  @return map.get(tokens.$post-text-input, post-input-#{$name});
}

.text-input {
  position: relative;

  label {
    @include typo-mx.use(label-default);
    position: absolute;
    transition: animation.$transition-base;
    inset-inline-start: calc.add($border-width, post-input(spacing-padding-inline-text-start));
    inset-inline-end: calc.add($border-width, post-input(spacing-padding-inline-text-end));
    inset-block-start: calc.add(
      $border-width,
      post-input(spacing-padding-block-text1),
      post-input(spacing-padding-block-text5)
    );
  }

  input {
    @include typo-mx.use(label-default);

    width: 100%;
    transition: animation.$transition-base;
    border-radius: post-input(border-radius-surface);
    padding-inline-start: post-input(spacing-padding-inline-text-start);
    padding-inline-end: post-input(spacing-padding-inline-text-end);
    padding-block: calc.add(
      post-input(spacing-padding-block-text1),
      post-input(spacing-padding-block-text5)
    );

    color: post-input(color-primary-enabled-fg);
    border: $border-width solid post-input(color-primary-enabled-stroke);
    background-color: post-input(color-primary-enabled-bg);

    &:placeholder-shown:focus,
    &:not(:placeholder-shown) {
      padding-block-start: calc(#{post-input(spacing-padding-block-text2)} + 21px);
      padding-block-end: post-input(spacing-padding-block-text2);

      + label {
        @include typo-mx.use(label-smaller);
        inset-block-start: calc.add($border-width, post-input(spacing-padding-block-text2));
      }
    }

    &:hover {
      border-color: post-input(color-primary-hover-stroke);
      background-color: post-input(color-primary-hover-bg);

      + label {
        color: post-input(color-primary-hover-fg);
      }
    }

    &:disabled {
      color: post-input(color-primary-disabled-fg);
      border-style: dashed;
      border-color: post-input(color-primary-disabled-stroke);
      background-color: post-input(color-primary-disabled-bg);

      + label {
        color: post-input(color-primary-disabled-fg);
      }
    }

    @include utility-mx.focus-style {
      border-color: post-input(color-primary-focus-stroke);
    }
  }
}
